@startuml
title Logical Class Diagram - GajadiCair System (with Job Services)

skinparam classAttributeIconSize 0
hide empty members

' =========================
' COMPANY
' =========================
class Company {
  company_id: string
  name: string
  email: string
  company_identifier: string
  avatar_uri: string
  payroll_day_of_month: number
  attendance_open_time: string
  attendance_close_time: string
  work_start_time: string
  attendance_tolerance_minutes: number
  minimum_hours_per_day: number
  recognize_with_gesture: boolean
  --
  getCompanyById()
  updateCompanyProfile()
  getAvailableSeats()
}

' =========================
' EMPLOYEE
' =========================
class Employee {
  employee_id: string
  company_id: string
  name: string
  email: string
  username: string
  is_active: boolean
  base_salary: number
  is_face_enrolled: boolean
  --
  getEmployeeProfile()
  updateEmployeeProfile()
}

Company "1" o-- "*" Employee : employs

' =========================
' ATTENDANCE
' =========================
class EmployeeAttendance {
  attendance_date: Date
  status: AttendanceStatus
  check_in_time: Date
  check_out_time: Date
  is_late: boolean
  --
}

enum AttendanceStatus {
  PRESENT
  ABSENT
  LEAVE
  SICK
}

Employee "1" o-- "*" EmployeeAttendance : records

' =========================
' PAYROLL
' =========================
class PayrollLog {
  payroll_date: Date
  amount: number
  --
}

class PayrollDetail {
  description: string
  type: PayrollDetailType
  amount: number
  --
}

enum PayrollDetailType {
  BASE_SALARY
  ALLOWANCE
  DEDUCTION
}

Employee "1" o-- "*" PayrollLog : receives
PayrollLog "1" o-- "*" PayrollDetail : consists_of

' =========================
' SUBSCRIPTION
' =========================
class SubscriptionHistory {
  level_plan: number
  period_start: Date
  period_end: Date
  --
}

Company "1" o-- "*" SubscriptionHistory : subscribes

' =========================
' FACE RECOGNITION
' =========================
class FaceRecognitionService {
  --
  checkFace()
  enrollFace()
  verifyFace()
  deleteFaceData()
}

FaceRecognitionService ..> Employee : verifies

' =========================
' JOB SERVICES
' =========================
class AttendanceJobService {
  --
  handleAutoAbsent()
}

class PayrollJobService {
  --
  runMonthlyPayroll()
}

AttendanceJobService ..> Employee
AttendanceJobService ..> EmployeeAttendance
AttendanceJobService ..> Company

PayrollJobService ..> Company
PayrollJobService ..> Employee
PayrollJobService ..> PayrollLog
PayrollJobService ..> PayrollDetail

@enduml
