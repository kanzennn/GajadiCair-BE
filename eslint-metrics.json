[{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\app.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\app.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\app.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\exceptions\\badRequest.exception.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\exceptions\\forbidden.exception.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\exceptions\\internalServerError.exception.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\middleware\\logger\\logger.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\google\\google-oauth.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\mailer\\mailer.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\mailer\\mailer.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\midtrans\\dto\\snap.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\midtrans\\midtrans.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\midtrans\\midtrans.service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":15,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":19,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe construction of a(n) `error` type typed value.","line":15,"column":17,"nodeType":"NewExpression","messageId":"unsafeNew","endLine":19,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .Snap on an `error` typed value.","line":15,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":15,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/require-await","severity":2,"message":"Async method 'createTransaction' has no 'await' expression.","line":22,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":22,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[874,880],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type error.","line":25,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":25,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":25,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":25,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .createTransaction on an `error` typed value.","line":25,"column":22,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":25,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\common\\services\\prisma\\prisma.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\config\\app.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\config\\jwt.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\config\\mailer.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\config\\midtrans.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\config\\oauth.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\config\\s3.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\attendance.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\attendance.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\attendance.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\attendance.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\attendance.service.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-member-access').","line":1,"column":1,"severity":1,"nodeType":null,"fix":{"range":[0,63],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment').","line":45,"column":7,"severity":1,"nodeType":null,"fix":{"range":[1484,1551],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment' or '@typescript-eslint/no-unsafe-call').","line":99,"column":7,"severity":1,"nodeType":null,"fix":{"range":[3268,3370],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment').","line":124,"column":9,"severity":1,"nodeType":null,"fix":{"range":[4147,4214],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment').","line":157,"column":7,"severity":1,"nodeType":null,"fix":{"range":[5068,5135],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment').","line":238,"column":9,"severity":1,"nodeType":null,"fix":{"range":[7729,7796],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":6,"source":"/* eslint-disable @typescript-eslint/no-unsafe-member-access */\r\nimport { Injectable } from '@nestjs/common';\r\nimport { PrismaService } from 'src/common/services/prisma/prisma.service';\r\nimport { FaceRecognitionService } from '../face-recognition/face-recognition.service';\r\nimport { startOfDay } from 'src/utils/date.utils';\r\nimport { BadRequestException } from 'src/common/exceptions/badRequest.exception';\r\nimport { CheckInDto } from './dto/check-in.dto';\r\nimport { CheckOutDto } from './dto/check-out.dto';\r\n\r\n@Injectable()\r\nexport class AttendanceService {\r\n  constructor(\r\n    private readonly prisma: PrismaService,\r\n    private readonly faceRecognitionService: FaceRecognitionService,\r\n  ) {}\r\n\r\n  async checkInFace(\r\n    file: Express.Multer.File,\r\n    employeeId: string,\r\n    data: CheckInDto,\r\n  ) {\r\n    const today = startOfDay();\r\n    const nowTime = new Date();\r\n\r\n    await this.faceRecognitionService.verifyFace(file, employeeId);\r\n\r\n    return this.prisma.$transaction(async (tx) => {\r\n      const employee = await tx.employee.findUnique({\r\n        where: { employee_id: employeeId },\r\n        select: {\r\n          company_id: true,\r\n          company: {\r\n            select: {\r\n              company_id: true,\r\n              attendance_location_enabled: true,\r\n              attendance_radius_meters: true,\r\n            },\r\n          },\r\n        },\r\n      });\r\n\r\n      if (!employee?.company)\r\n        throw new BadRequestException('Employee not found');\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      const company = employee.company;\r\n\r\n      if (company.attendance_location_enabled) {\r\n        if (!company.attendance_radius_meters) {\r\n          throw new BadRequestException('Attendance radius not configured');\r\n        }\r\n\r\n        // cek: lokasi company ada? + user dalam radius?\r\n        const rows = await tx.$queryRaw<\r\n          { has_location: boolean; in_radius: boolean }[]\r\n        >`\r\n        SELECT\r\n          (c.attendance_location IS NOT NULL) AS has_location,\r\n          ST_DWithin(\r\n            c.attendance_location,\r\n            ST_SetSRID(\r\n              ST_MakePoint(\r\n                ${data.longitude}::double precision,\r\n                ${data.latitude}::double precision\r\n              ),\r\n              4326\r\n            )::geography,\r\n            ${company.attendance_radius_meters}::double precision\r\n          ) AS in_radius\r\n        FROM companies c\r\n        WHERE c.company_id = ${company.company_id}\r\n        LIMIT 1\r\n      `;\r\n\r\n        const hasLocation = rows?.[0]?.has_location ?? false;\r\n        if (!hasLocation) {\r\n          throw new BadRequestException('Attendance location not configured');\r\n        }\r\n\r\n        const inRadius = rows?.[0]?.in_radius ?? false;\r\n        if (!inRadius) {\r\n          throw new BadRequestException(\r\n            'You are outside the attendance radius',\r\n          );\r\n        }\r\n      }\r\n\r\n      const existing = await tx.employeeAttendance.findFirst({\r\n        where: {\r\n          employee_id: employeeId,\r\n          attendance_date: today,\r\n          deleted_at: null,\r\n        },\r\n        select: { employee_attendance_id: true },\r\n      });\r\n\r\n      if (existing) throw new BadRequestException('Already checked in today');\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\r\n      const created = await tx.employeeAttendance.create({\r\n        data: {\r\n          employee_id: employeeId,\r\n          attendance_date: today,\r\n          check_in_time: nowTime,\r\n        },\r\n        select: { employee_attendance_id: true },\r\n      });\r\n\r\n      // simpan check_in_location (kalau enabled, atau kalau kamu mau selalu simpan)\r\n      await tx.$executeRaw`\r\n      UPDATE employee_attendances\r\n      SET check_in_location =\r\n        ST_SetSRID(\r\n          ST_MakePoint(\r\n            ${data.longitude}::double precision,\r\n            ${data.latitude}::double precision\r\n          ),\r\n          4326\r\n        )::geography\r\n      WHERE employee_attendance_id = ${created.employee_attendance_id}\r\n    `;\r\n\r\n      return tx.employeeAttendance.findUnique({\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n        where: { employee_attendance_id: created.employee_attendance_id },\r\n      });\r\n    });\r\n  }\r\n\r\n  async checkOutFace(\r\n    file: Express.Multer.File,\r\n    employeeId: string,\r\n    data: CheckOutDto,\r\n  ) {\r\n    const nowTime = new Date();\r\n\r\n    await this.faceRecognitionService.verifyFace(file, employeeId);\r\n\r\n    return this.prisma.$transaction(async (tx) => {\r\n      const employee = await tx.employee.findUnique({\r\n        where: { employee_id: employeeId },\r\n        select: {\r\n          company_id: true,\r\n          company: {\r\n            select: {\r\n              company_id: true,\r\n              attendance_location_enabled: true,\r\n              attendance_radius_meters: true,\r\n            },\r\n          },\r\n        },\r\n      });\r\n\r\n      if (!employee?.company)\r\n        throw new BadRequestException('Employee not found');\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      const company = employee.company;\r\n\r\n      if (company.attendance_location_enabled) {\r\n        if (!company.attendance_radius_meters) {\r\n          throw new BadRequestException('Attendance radius not configured');\r\n        }\r\n\r\n        // cek: lokasi company ada? + user dalam radius?\r\n        const rows = await tx.$queryRaw<\r\n          { has_location: boolean; in_radius: boolean }[]\r\n        >`\r\n        SELECT\r\n          (c.attendance_location IS NOT NULL) AS has_location,\r\n          ST_DWithin(\r\n            c.attendance_location,\r\n            ST_SetSRID(\r\n              ST_MakePoint(\r\n                ${data.longitude}::double precision,\r\n                ${data.latitude}::double precision\r\n              ),\r\n              4326\r\n            )::geography,\r\n            ${company.attendance_radius_meters}::double precision\r\n          ) AS in_radius\r\n        FROM companies c\r\n        WHERE c.company_id = ${company.company_id}\r\n        LIMIT 1\r\n      `;\r\n\r\n        const hasLocation = rows?.[0]?.has_location ?? false;\r\n        if (!hasLocation) {\r\n          throw new BadRequestException('Attendance location not configured');\r\n        }\r\n\r\n        const inRadius = rows?.[0]?.in_radius ?? false;\r\n        if (!inRadius) {\r\n          throw new BadRequestException(\r\n            'You are outside the attendance radius',\r\n          );\r\n        }\r\n      }\r\n\r\n      const existing = await tx.employeeAttendance.findFirst({\r\n        where: {\r\n          employee_id: employeeId,\r\n          check_out_time: null,\r\n          deleted_at: null,\r\n        },\r\n      });\r\n\r\n      if (!existing)\r\n        throw new BadRequestException('You have not checked in today');\r\n\r\n      const total_work_hours =\r\n        (nowTime.getTime() - existing.check_in_time.getTime()) / 3600000;\r\n\r\n      const updated = await tx.employeeAttendance.update({\r\n        where: { employee_attendance_id: existing.employee_attendance_id },\r\n        data: {\r\n          check_out_time: nowTime,\r\n          total_work_hours,\r\n        },\r\n        select: { employee_attendance_id: true },\r\n      });\r\n\r\n      // simpan check_in_location (kalau enabled, atau kalau kamu mau selalu simpan)\r\n      await tx.$executeRaw`\r\n      UPDATE employee_attendances\r\n      SET check_out_location =\r\n        ST_SetSRID(\r\n          ST_MakePoint(\r\n            ${data.longitude}::double precision,\r\n            ${data.latitude}::double precision\r\n          ),\r\n          4326\r\n        )::geography\r\n      WHERE employee_attendance_id = ${updated.employee_attendance_id}\r\n    `;\r\n\r\n      return tx.employeeAttendance.findUnique({\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n        where: { employee_attendance_id: updated.employee_attendance_id },\r\n      });\r\n    });\r\n  }\r\n\r\n  async getAllAttendance(employeeId: string) {\r\n    const attendance = await this.prisma.employeeAttendance.findMany({\r\n      where: {\r\n        employee_id: employeeId,\r\n        deleted_at: null,\r\n      },\r\n      orderBy: { attendance_date: 'desc' },\r\n    });\r\n\r\n    return attendance;\r\n  }\r\n\r\n  async getTodayAttendanceStatus(employeeId: string) {\r\n    const today = startOfDay();\r\n\r\n    const attendance = await this.prisma.employeeAttendance.findFirst({\r\n      where: {\r\n        employee_id: employeeId,\r\n        attendance_date: today,\r\n        deleted_at: null,\r\n      },\r\n    });\r\n\r\n    return attendance;\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\dto\\check-in.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\dto\\check-out.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\attendance\\entities\\attendance.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\auth.controller.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":54,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":54,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":54,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":54,"endColumn":44},{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":61,"column":14,"nodeType":"MemberExpression","messageId":"unboundWithoutThisAnnotation","endLine":61,"endColumn":27},{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":65,"column":14,"nodeType":"MemberExpression","messageId":"unboundWithoutThisAnnotation","endLine":65,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":75,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":75,"endColumn":77},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":75,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":75,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":82,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":86,"endColumn":9},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":82,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":82,"endColumn":47}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Test, TestingModule } from '@nestjs/testing';\r\nimport { AuthControllerV1 } from './auth.controller';\r\nimport { AuthService } from './auth.service';\r\nimport type { Response } from 'express';\r\nimport { LoginAuthDto } from './dto/login-auth.dto';\r\n\r\ndescribe('AuthControllerV1', () => {\r\n  let controller: AuthControllerV1;\r\n  let service: AuthService;\r\n\r\n  beforeEach(async () => {\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      controllers: [AuthControllerV1],\r\n      providers: [\r\n        {\r\n          provide: AuthService,\r\n          useValue: {\r\n            login: jest.fn().mockResolvedValue({\r\n              user: { id: '1', email: 'a@b.com', password: undefined },\r\n              access_token: 'access-token',\r\n              refresh_token: 'refresh-token',\r\n            }),\r\n            googleLogin: jest.fn().mockResolvedValue({ userId: 'google1' }),\r\n            register: jest\r\n              .fn()\r\n              .mockResolvedValue({ id: '2', email: 'b@b.com' }),\r\n          },\r\n        },\r\n      ],\r\n    }).compile();\r\n\r\n    controller = module.get<AuthControllerV1>(AuthControllerV1);\r\n    service = module.get<AuthService>(AuthService);\r\n  });\r\n\r\n  it('should be defined', () => {\r\n    expect(service).toBeDefined();\r\n  });\r\n\r\n  describe('AuthService', () => {\r\n    it('service should be defined', () => {\r\n      expect(service).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('login', () => {\r\n    it('should return user and set tokens', async () => {\r\n      const res = {\r\n        setHeader: jest.fn(() => undefined),\r\n        cookie: jest.fn(() => undefined),\r\n      } as unknown as Response;\r\n\r\n      const dto: LoginAuthDto = { email: 'a@b.com', password: '123456' };\r\n      const result = await controller.login(dto, res);\r\n\r\n      expect(result).toEqual({\r\n        id: '1',\r\n        email: 'a@b.com',\r\n        password: undefined,\r\n      });\r\n      expect(res.setHeader).toHaveBeenCalledWith(\r\n        'Authorization',\r\n        'Bearer access-token',\r\n      );\r\n      expect(res.cookie).toHaveBeenCalledWith(\r\n        'refresh_token',\r\n        'refresh-token',\r\n        expect.any(Object),\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('loginWithGoogle', () => {\r\n    it('should call service.googleLogin', async () => {\r\n      const result = await controller.loginWithGoogle({ id_token: 'token' });\r\n      expect(result).toEqual({ userId: 'google1' });\r\n    });\r\n  });\r\n\r\n  describe('register', () => {\r\n    it('should call service.register', async () => {\r\n      const result = await controller.register({\r\n        name: 'test',\r\n        email: 'b@b.com',\r\n        password: '123456',\r\n      });\r\n\r\n      expect(result).toEqual({ id: '2', email: 'b@b.com' });\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\auth.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\auth.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\auth.service.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":29,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":29,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .findFirst on an `error` typed value.","line":48,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":48,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":50,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":50,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .findFirst on an `error` typed value.","line":56,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":56,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":62,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":62,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .findFirst on an `error` typed value.","line":68,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":68,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":78,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":81,"endColumn":9},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":2,"message":"Unsafe call of a(n) `error` type typed value.","line":78,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":78,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .user on an `error` typed value.","line":83,"column":21,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":83,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .access_token on an `error` typed value.","line":88,"column":21,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":88,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .refresh_token on an `error` typed value.","line":89,"column":21,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":89,"endColumn":34}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Test, TestingModule } from '@nestjs/testing';\r\nimport { AuthService } from './auth.service';\r\nimport { PrismaService } from 'src/common/services/prisma/prisma.service';\r\nimport { JwtService } from '@nestjs/jwt';\r\nimport { hash } from 'argon2';\r\nimport { GoogleOauthService } from 'src/common/services/google-oauth.service';\r\nimport { BadRequestException } from 'src/common/exceptions/badRequest.exception';\r\n\r\ndescribe('AuthService', () => {\r\n  let service: AuthService;\r\n  let prisma: PrismaService;\r\n  let jwtService: JwtService;\r\n\r\n  beforeEach(async () => {\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      providers: [\r\n        AuthService,\r\n        {\r\n          provide: PrismaService,\r\n          useValue: {\r\n            user: { findFirst: jest.fn(), create: jest.fn() },\r\n          },\r\n        },\r\n        {\r\n          provide: JwtService,\r\n          useValue: { signAsync: jest.fn() },\r\n        },\r\n        {\r\n          provide: GoogleOauthService,\r\n          useValue: {\r\n            getUserData: jest.fn(),\r\n          },\r\n        },\r\n      ],\r\n    }).compile();\r\n\r\n    service = module.get<AuthService>(AuthService);\r\n    prisma = module.get<PrismaService>(PrismaService);\r\n    jwtService = module.get<JwtService>(JwtService);\r\n  });\r\n\r\n  it('should be defined', () => {\r\n    expect(service).toBeDefined();\r\n  });\r\n\r\n  describe('login', () => {\r\n    it('should throw if user not found', async () => {\r\n      (prisma.user.findFirst as jest.Mock).mockResolvedValue(null);\r\n      await expect(\r\n        service.login({ email: 'a@b.com', password: '123' }),\r\n      ).rejects.toBeInstanceOf(BadRequestException);\r\n    });\r\n\r\n    it('should throw if password invalid', async () => {\r\n      const hashed = await hash('correct');\r\n      (prisma.user.findFirst as jest.Mock).mockResolvedValue({\r\n        id: '1',\r\n        email: 'a@b.com',\r\n        password: hashed,\r\n      });\r\n      await expect(\r\n        service.login({ email: 'a@b.com', password: '123' }),\r\n      ).rejects.toBeInstanceOf(BadRequestException);\r\n    });\r\n\r\n    it('should return user + tokens if credentials valid', async () => {\r\n      const hashed = await hash('123456');\r\n      (prisma.user.findFirst as jest.Mock).mockResolvedValue({\r\n        id: '1',\r\n        email: 'a@b.com',\r\n        password: hashed,\r\n      });\r\n      (jwtService.signAsync as jest.Mock).mockImplementation(\r\n        (payload: { sub: string; email: string }) =>\r\n          Promise.resolve(`token-${payload.sub}`),\r\n      );\r\n\r\n      const result = await service.login({\r\n        email: 'a@b.com',\r\n        password: '123456',\r\n      });\r\n\r\n      expect(result.user).toEqual({\r\n        id: '1',\r\n        email: 'a@b.com',\r\n        password: undefined,\r\n      });\r\n      expect(result.access_token).toBe('token-1');\r\n      expect(result.refresh_token).toBe('token-1');\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\auth.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\dto\\login-auth.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\dto\\login-employee-auth.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\dto\\login-with-google.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\dto\\register-auth.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\dto\\token-payload.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\guards\\company.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\guards\\employee.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\strategies\\jwt-company.strategy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\auth\\strategies\\jwt-employee.strategy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\bank.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\bank.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\bank.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\bank.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\bank.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\dto\\create-bank.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\dto\\update-bank.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\bank\\entities\\bank.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\company.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\company.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\company.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\company.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\company.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\dto\\create-company.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\dto\\create-employee.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\dto\\update-company.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\dto\\update-employee.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\company\\entities\\company.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\dto\\create-employee.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\dto\\update-employee.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\employee.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\employee.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\employee.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\employee.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\employee.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\employee\\entities\\employee.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\dto\\create-face-recognition.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\dto\\has-face-response.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\dto\\update-face-recognition.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\entities\\face-recognition.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\face-recognition.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\face-recognition.controller.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used.","line":4,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":7},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment').","line":63,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1952,2019],"text":" "}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":34,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":34,"endColumn":67,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":52,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":55,"endColumn":6,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import {\r\n  Controller,\r\n  Post,\r\n  Body,\r\n  UploadedFile,\r\n  Req,\r\n  UseInterceptors,\r\n  UseGuards,\r\n  UploadedFiles,\r\n  Delete,\r\n} from '@nestjs/common';\r\nimport { FaceRecognitionService } from './face-recognition.service';\r\nimport { BadRequestException } from 'src/common/exceptions/badRequest.exception';\r\nimport { successResponse } from 'src/utils/response.utils';\r\nimport { FileInterceptor, FilesInterceptor } from '@nestjs/platform-express';\r\nimport { EmployeeAuthGuard } from '../auth/guards/employee.guard';\r\nimport { TokenPayloadDto } from '../auth/dto/token-payload.dto';\r\n\r\n@Controller({ path: 'employee/face-recognition', version: '1' })\r\nexport class FaceRecognitionController {\r\n  constructor(\r\n    private readonly faceRecognitionService: FaceRecognitionService,\r\n  ) {}\r\n\r\n  @Post('check-face')\r\n  @UseGuards(EmployeeAuthGuard)\r\n  @UseInterceptors(FileInterceptor('file'))\r\n  async checkFace(@UploadedFile() file: Express.Multer.File) {\r\n    if (!file) {\r\n      throw new BadRequestException('No image uploaded');\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const data = await this.faceRecognitionService.checkFace(file);\r\n\r\n    return successResponse(data);\r\n  }\r\n\r\n  // 20 Image\r\n  @Post('enroll-face')\r\n  @UseGuards(EmployeeAuthGuard)\r\n  @UseInterceptors(FilesInterceptor('files', 20))\r\n  async enrollFace(\r\n    @UploadedFiles() files: Express.Multer.File[],\r\n    @Req() req: Request & { user: TokenPayloadDto },\r\n  ) {\r\n    if (!files || files.length === 0) {\r\n      throw new BadRequestException('No images uploaded');\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const data = await this.faceRecognitionService.enrollFace(\r\n      files,\r\n      req.user.sub,\r\n    );\r\n\r\n    return successResponse(data);\r\n  }\r\n\r\n  @Delete('remove-face')\r\n  @UseGuards(EmployeeAuthGuard)\r\n  async removeFace(@Req() req: Request & { user: TokenPayloadDto }) {\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const data = await this.faceRecognitionService.deleteFaceData(req.user.sub);\r\n    return successResponse(data);\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\face-recognition.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\face-recognition.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\face-recognition\\face-recognition.service.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-return').","line":177,"column":7,"severity":1,"nodeType":null,"fix":{"range":[6035,6098],"text":" "}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":29,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":29,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":39,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":39,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":43,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":43,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":49,"column":15,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":50,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":49,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":49,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":103,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":103,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":113,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":113,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":119,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":119,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":127,"column":15,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":128,"endColumn":53,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":127,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":127,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":188,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":188,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":194,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":194,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":202,"column":15,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":203,"endColumn":55,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":202,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":202,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":265,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":265,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":269,"column":33,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":269,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":277,"column":15,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":278,"endColumn":56,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .detail on an `any` value.","line":277,"column":35,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":277,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { Injectable } from '@nestjs/common';\r\nimport axios, { AxiosError } from 'axios';\r\nimport FormData from 'form-data';\r\nimport { BadRequestException } from 'src/common/exceptions/badRequest.exception';\r\nimport { InternalServerErrorException } from 'src/common/exceptions/internalServerError.exception';\r\nimport { PrismaService } from 'src/common/services/prisma/prisma.service';\r\nimport { HasFaceResponseDto } from './dto/has-face-response.dto';\r\n\r\n@Injectable()\r\nexport class FaceRecognitionService {\r\n  private readonly pythonUrl =\r\n    process.env.PYTHON_FACEREC_URL || 'http://localhost:8001';\r\n\r\n  constructor(private readonly prisma: PrismaService) {}\r\n\r\n  async checkFace(file: Express.Multer.File) {\r\n    const form = new FormData();\r\n    form.append('file', file.buffer, {\r\n      filename: file.originalname || 'frame.jpg',\r\n      contentType: file.mimetype || 'image/jpeg',\r\n    });\r\n\r\n    try {\r\n      const res = await axios.post(`${this.pythonUrl}/has-face`, form, {\r\n        headers: form.getHeaders(),\r\n      });\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\r\n      return res.data;\r\n    } catch (err) {\r\n      if (err instanceof AxiosError) {\r\n        console.log(\r\n          'Python check-face error:',\r\n          err.response?.data || err.message,\r\n        );\r\n\r\n        if (err.response?.status === 400) {\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n          if (err.response?.data?.detail?.error === 'file_too_large') {\r\n            throw new BadRequestException('Uploaded file is too large');\r\n          } else if (\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n            err.response?.data?.detail?.error === 'invalid_file_type'\r\n          ) {\r\n            throw new BadRequestException('Invalid file type uploaded');\r\n          } else {\r\n            throw new BadRequestException(\r\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\r\n              err.response?.data?.detail?.message ||\r\n                'Bad request during face check',\r\n            );\r\n          }\r\n        }\r\n\r\n        throw new InternalServerErrorException(\r\n          'Internal server error during face check',\r\n        );\r\n      }\r\n\r\n      console.log('Unknown error check-face:', err);\r\n      if (err instanceof BadRequestException) {\r\n        throw err;\r\n      }\r\n\r\n      throw new BadRequestException('Failed to check face');\r\n    }\r\n  }\r\n\r\n  async enrollFace(files: Express.Multer.File[], employeeId: string) {\r\n    const userAlreadyEnrolled = await this.prisma.employee.findUnique({\r\n      where: { employee_id: employeeId },\r\n      select: { is_face_enrolled: true },\r\n    });\r\n    if (userAlreadyEnrolled?.is_face_enrolled) {\r\n      throw new BadRequestException(\r\n        'You have already enrolled your face data before',\r\n      );\r\n    }\r\n    const form = new FormData();\r\n\r\n    files.forEach((file) => {\r\n      form.append('files', file.buffer, {\r\n        filename: file.originalname || 'frame.jpg',\r\n        contentType: file.mimetype || 'image/jpeg',\r\n      });\r\n    });\r\n\r\n    form.append('employee_id', employeeId);\r\n\r\n    try {\r\n      const res = await axios.post(`${this.pythonUrl}/enroll`, form, {\r\n        headers: {\r\n          ...form.getHeaders(),\r\n        },\r\n      });\r\n\r\n      await this.prisma.employee.update({\r\n        where: { employee_id: employeeId },\r\n        data: { is_face_enrolled: true },\r\n      });\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\r\n      return res.data;\r\n    } catch (err) {\r\n      if (err instanceof AxiosError) {\r\n        console.log(\r\n          'Python enroll-face error:',\r\n          err.response?.data || err.message,\r\n        );\r\n\r\n        if (err.response?.status === 400) {\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n          if (err.response?.data?.detail?.error === 'employee_exists') {\r\n            throw new BadRequestException(\r\n              'You have already enrolled your face data before',\r\n            );\r\n          } else if (\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n            err.response?.data?.detail?.error === 'invalid_employee_id'\r\n          ) {\r\n            throw new BadRequestException(\r\n              'The provided employee ID is invalid',\r\n            );\r\n          } else {\r\n            throw new BadRequestException(\r\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\r\n              err.response?.data?.detail?.message ||\r\n                'Bad request during face enrollment',\r\n            );\r\n          }\r\n        }\r\n\r\n        throw new InternalServerErrorException(\r\n          'Internal server error during face enrollment',\r\n        );\r\n      }\r\n\r\n      console.log('Unknown error enroll-face:', err);\r\n      if (err instanceof BadRequestException) {\r\n        throw err;\r\n      }\r\n\r\n      throw new BadRequestException('Failed to enroll face');\r\n    }\r\n  }\r\n\r\n  async verifyFace(file: Express.Multer.File, employeeId: string) {\r\n    const userAlreadyEnrolled = await this.prisma.employee.findUnique({\r\n      where: { employee_id: employeeId },\r\n      select: { is_face_enrolled: true },\r\n    });\r\n    if (userAlreadyEnrolled?.is_face_enrolled) {\r\n      throw new BadRequestException(\r\n        'You have already enrolled your face data before',\r\n      );\r\n    }\r\n\r\n    const form = new FormData();\r\n    form.append('file', file.buffer, {\r\n      filename: file.originalname || 'frame.jpg',\r\n      contentType: file.mimetype || 'image/jpeg',\r\n    });\r\n\r\n    try {\r\n      const res: HasFaceResponseDto = await axios.post(\r\n        `${this.pythonUrl}/recognize`,\r\n        form,\r\n        {\r\n          headers: form.getHeaders(),\r\n        },\r\n      );\r\n\r\n      if (res.data.employee_id !== employeeId) {\r\n        throw new BadRequestException('Face does not match');\r\n      }\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\r\n      return res.data;\r\n    } catch (err) {\r\n      if (err instanceof AxiosError) {\r\n        console.log(\r\n          'Python verify-face error:',\r\n          err.response?.data || err.message,\r\n        );\r\n\r\n        if (err.response?.status === 400) {\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n          if (err.response?.data?.detail?.error === 'no_dataset') {\r\n            throw new BadRequestException(\r\n              'No face data found for this employee. Please enroll first.',\r\n            );\r\n          } else if (\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n            err.response?.data?.detail?.error === 'no_face'\r\n          ) {\r\n            throw new BadRequestException(\r\n              'No face detected in the provided image. Please try again.',\r\n            );\r\n          } else {\r\n            throw new BadRequestException(\r\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\r\n              err.response?.data?.detail?.message ||\r\n                'Bad request during face verification',\r\n            );\r\n          }\r\n        }\r\n\r\n        throw new InternalServerErrorException(\r\n          'Internal server error during face verification',\r\n        );\r\n      }\r\n\r\n      console.log('Unknown error verify-face:', err);\r\n      if (err instanceof BadRequestException) {\r\n        throw err;\r\n      }\r\n\r\n      throw new BadRequestException('Failed to verify face');\r\n    }\r\n  }\r\n\r\n  async deleteFaceData(employeeId: string) {\r\n    try {\r\n      const isUserEnrolled = await this.prisma.employee.findUnique({\r\n        where: { employee_id: employeeId },\r\n        select: { is_face_enrolled: true },\r\n      });\r\n\r\n      if (!isUserEnrolled) {\r\n        throw new BadRequestException('Employee not found');\r\n      }\r\n\r\n      if (!isUserEnrolled.is_face_enrolled) {\r\n        throw new BadRequestException(\r\n          'You have not enrolled your face data yet',\r\n        );\r\n      }\r\n\r\n      const form = new FormData();\r\n\r\n      form.append('employee_id', employeeId);\r\n\r\n      await axios.delete(`${this.pythonUrl}/delete`, {\r\n        data: form,\r\n        headers: {\r\n          ...form.getHeaders(),\r\n        },\r\n      });\r\n\r\n      const newData = await this.prisma.employee.update({\r\n        where: { employee_id: employeeId },\r\n        data: { is_face_enrolled: false },\r\n      });\r\n\r\n      return newData;\r\n    } catch (err) {\r\n      if (err instanceof AxiosError) {\r\n        console.log(\r\n          'Python delete-face-data error:',\r\n          err.response?.data || err.message,\r\n        );\r\n\r\n        if (err.response?.status === 400) {\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n          if (err.response?.data?.detail?.error === 'dataset_not_found') {\r\n            throw new BadRequestException('No face data found for this user');\r\n          } else if (\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n            err.response?.data?.detail?.error === 'invalid_employee_id'\r\n          ) {\r\n            throw new BadRequestException(\r\n              'The provided employee ID is invalid',\r\n            );\r\n          } else {\r\n            throw new BadRequestException(\r\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\r\n              err.response?.data?.detail?.message ||\r\n                'Bad request during face data deletion',\r\n            );\r\n          }\r\n        }\r\n\r\n        throw new InternalServerErrorException(\r\n          'Internal server error during face data deletion',\r\n        );\r\n      }\r\n\r\n      if (err instanceof BadRequestException) {\r\n        throw err;\r\n      }\r\n\r\n      console.log('Unknown error delete-face-data:', err);\r\n      throw new BadRequestException('Failed to delete face data');\r\n    }\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\dto\\create-snap-subscription.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\entities\\subscription.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\subscription.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\subscription.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\subscription.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\subscription.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\core\\subscription\\subscription.service.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-assignment').","line":60,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1946,2013],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-member-access').","line":64,"column":9,"severity":1,"nodeType":null,"fix":{"range":[2140,2210],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-member-access').","line":66,"column":9,"severity":1,"nodeType":null,"fix":{"range":[2282,2352],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-member-access').","line":69,"column":13,"severity":1,"nodeType":null,"fix":{"range":[2451,2521],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unsafe-member-access').","line":75,"column":11,"severity":1,"nodeType":null,"fix":{"range":[2684,2754],"text":" "}}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an error typed value.","line":61,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":78,"endColumn":9,"suppressions":[{"kind":"directive","justification":""},{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .ApiResponse on an `any` value.","line":65,"column":48,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":65,"endColumn":59,"suppressions":[{"kind":"directive","justification":""},{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .ApiResponse on an `any` value.","line":67,"column":19,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":67,"endColumn":30,"suppressions":[{"kind":"directive","justification":""},{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .ApiResponse on an `any` value.","line":70,"column":42,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":70,"endColumn":53,"suppressions":[{"kind":"directive","justification":""},{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .message on an `any` value.","line":76,"column":47,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":76,"endColumn":54,"suppressions":[{"kind":"directive","justification":""},{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .order_id on an `any` value.","line":115,"column":20,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":115,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .status_code on an `any` value.","line":115,"column":39,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":115,"endColumn":50,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .gross_amount on an `any` value.","line":115,"column":61,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":115,"endColumn":73,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .signature_key on an `any` value.","line":119,"column":26,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":119,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":128,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":128,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .order_id on an `any` value.","line":128,"column":44,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":128,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":136,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":136,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":139,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":139,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .order_id on an `any` value.","line":139,"column":44,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":139,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":142,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":142,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":142,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":142,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":143,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":143,"endColumn":56,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .payment_type on an `any` value.","line":143,"column":44,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":143,"endColumn":56,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":144,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":144,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_id on an `any` value.","line":144,"column":44,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":144,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":148,"column":16,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":148,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .fraud_status on an `any` value.","line":149,"column":17,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":149,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":150,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":150,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":154,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":154,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .order_id on an `any` value.","line":154,"column":44,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":154,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":157,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":157,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":157,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":157,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":184,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":184,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":185,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":185,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":186,"column":15,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":186,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":190,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":190,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .order_id on an `any` value.","line":190,"column":44,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":190,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":193,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":193,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .transaction_status on an `any` value.","line":193,"column":36,"nodeType":"Identifier","messageId":"unsafeMemberExpression","endLine":193,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":"/* eslint-disable @typescript-eslint/no-unsafe-member-access */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\nimport { BadRequestException, Injectable } from '@nestjs/common';\r\nimport { CreateSnapSubscriptionDto } from './dto/create-snap-subscription.dto';\r\nimport { TokenPayloadDto } from '../auth/dto/token-payload.dto';\r\nimport { PrismaService } from 'src/common/services/prisma/prisma.service';\r\nimport { CompanyService } from '../company/company.service';\r\nimport { MidtransService } from 'src/common/services/midtrans/midtrans.service';\r\nimport { InternalServerErrorException } from 'src/common/exceptions/internalServerError.exception';\r\nimport { SnapDto } from 'src/common/services/midtrans/dto/snap.dto';\r\nimport crypto from 'crypto';\r\n\r\nimport { ConfigService } from '@nestjs/config';\r\n\r\n@Injectable()\r\nexport class SubscriptionService {\r\n  constructor(\r\n    private readonly midtransService: MidtransService,\r\n    private readonly prisma: PrismaService,\r\n    private readonly companyService: CompanyService,\r\n    private readonly configService: ConfigService,\r\n  ) {}\r\n\r\n  async createSnap(\r\n    createSnapSubscriptionDto: CreateSnapSubscriptionDto,\r\n    user: TokenPayloadDto,\r\n  ) {\r\n    const companyProfile = await this.companyService.getCompanyById(user.sub);\r\n\r\n    let gross_amount = 100000;\r\n    let plan = 1;\r\n\r\n    switch (createSnapSubscriptionDto.level_plan) {\r\n      case 1:\r\n        plan = 1;\r\n        gross_amount = 100000;\r\n        break;\r\n      case 2:\r\n        plan = 2;\r\n        gross_amount = 250000;\r\n        break;\r\n      default:\r\n        plan = 1;\r\n        gross_amount = 100000;\r\n    }\r\n\r\n    const order_id = `sub${plan}-${Date.now()}`;\r\n\r\n    const params = {\r\n      transaction_details: {\r\n        order_id: order_id,\r\n        gross_amount,\r\n      },\r\n      customer_details: {\r\n        first_name: `${companyProfile?.name}`,\r\n        email: companyProfile?.email,\r\n      },\r\n    };\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const result: SnapDto = await this.midtransService\r\n      .createTransaction(params)\r\n      .catch((error) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n        console.error('Midtrans Error:', error.ApiResponse);\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n        if (error.ApiResponse) {\r\n          throw new InternalServerErrorException(\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n            `Midtrans API Error: ${error.ApiResponse.error_messages[0]}`,\r\n          );\r\n        }\r\n\r\n        throw new InternalServerErrorException(\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n          `Midtrans Unexpected Error: ${error.message}`,\r\n        );\r\n      });\r\n\r\n    const subscription =\r\n      await this.prisma.companySubscriptionTransactionHistory.create({\r\n        data: {\r\n          company_subscription_id: order_id,\r\n          company_id: user.sub,\r\n          gross_amount: gross_amount,\r\n          midtrans_redirect_url: result.redirect_url,\r\n          midtrans_transaction_token: result.token,\r\n          level_plan: plan,\r\n          plan_duration_months: 1,\r\n        },\r\n      });\r\n\r\n    if (!subscription) {\r\n      throw new InternalServerErrorException(\r\n        'Failed to create subscription transaction record',\r\n      );\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async getSubscriptionTransactionHistoriesByCompany(company_id: string) {\r\n    return await this.prisma.companySubscriptionTransactionHistory.findMany({\r\n      where: { company_id },\r\n      orderBy: { created_at: 'desc' },\r\n    });\r\n  }\r\n\r\n  async handleMidtransWebhook(payload: any) {\r\n    const serverKey = this.configService.get<string>('MIDTRANS_SERVER_KEY');\r\n\r\n    const hash = crypto\r\n      .createHash('sha512')\r\n      .update(\r\n        `${payload.order_id}${payload.status_code}${payload.gross_amount}${serverKey}`,\r\n      )\r\n      .digest('hex');\r\n\r\n    if (hash !== payload.signature_key) {\r\n      throw new BadRequestException('Invalid signature key');\r\n    }\r\n\r\n    console.log(payload);\r\n\r\n    const company_subscription_transaction_history =\r\n      await this.prisma.companySubscriptionTransactionHistory.findUnique({\r\n        where: {\r\n          company_subscription_id: payload.order_id,\r\n        },\r\n      });\r\n\r\n    if (!company_subscription_transaction_history) {\r\n      throw new BadRequestException('Subscription transaction not found');\r\n    }\r\n\r\n    if (payload.transaction_status === 'pending') {\r\n      await this.prisma.companySubscriptionTransactionHistory.update({\r\n        where: {\r\n          company_subscription_id: payload.order_id,\r\n        },\r\n        data: {\r\n          midtrans_status: payload.transaction_status,\r\n          midtrans_payment_method: payload.payment_type,\r\n          midtrans_transaction_id: payload.transaction_id,\r\n        },\r\n      });\r\n    } else if (\r\n      (payload.transaction_status === 'capture' &&\r\n        payload.fraud_status === 'accept') ||\r\n      payload.transaction_status === 'settlement'\r\n    ) {\r\n      await this.prisma.companySubscriptionTransactionHistory.update({\r\n        where: {\r\n          company_subscription_id: payload.order_id,\r\n        },\r\n        data: {\r\n          midtrans_status: payload.transaction_status,\r\n          midtrans_paid_at: new Date(),\r\n        },\r\n      });\r\n\r\n      const new_expired_date = () => {\r\n        const now = new Date();\r\n        const dayToMs =\r\n          company_subscription_transaction_history.plan_duration_months *\r\n          30 *\r\n          24 *\r\n          60 *\r\n          60 *\r\n          1000;\r\n        return new Date(now.getTime() + dayToMs);\r\n      };\r\n\r\n      await this.prisma.company.update({\r\n        where: {\r\n          company_id: company_subscription_transaction_history.company_id,\r\n        },\r\n        data: {\r\n          level_plan: company_subscription_transaction_history.level_plan,\r\n          plan_expiration: new_expired_date(),\r\n        },\r\n      });\r\n    } else if (\r\n      payload.transaction_status === 'deny' ||\r\n      payload.transaction_status === 'expire' ||\r\n      payload.transaction_status === 'cancel'\r\n    ) {\r\n      await this.prisma.companySubscriptionTransactionHistory.update({\r\n        where: {\r\n          company_subscription_id: payload.order_id,\r\n        },\r\n        data: {\r\n          midtrans_status: payload.transaction_status,\r\n        },\r\n      });\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\jobs\\attendance.job.ts","messages":[{"ruleId":"@typescript-eslint/require-await","severity":2,"message":"Async method 'runEveryMidnight' has no 'await' expression.","line":11,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":11,"endColumn":25,"suggestions":[{"messageId":"removeAsync","fix":{"range":[273,279],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Injectable, Logger } from '@nestjs/common';\r\nimport { Cron } from '@nestjs/schedule';\r\n\r\n@Injectable()\r\nexport class DailyJobService {\r\n  private readonly logger = new Logger(DailyJobService.name);\r\n\r\n  @Cron('0 0 * * *', {\r\n    timeZone: 'Asia/Jakarta',\r\n  })\r\n  async runEveryMidnight() {\r\n    this.logger.log('Scheduler berjalan jam 00:00');\r\n    // TODO: logic kamu\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\main.ts","messages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":1,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":70,"column":1,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":70,"endColumn":13,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1892,1892],"text":"void "},"desc":"Add void operator to ignore."},{"messageId":"floatingFixAwait","fix":{"range":[1892,1892],"text":"await "},"desc":"Add await operator."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NestFactory } from '@nestjs/core';\r\nimport { AppModule } from './app.module';\r\nimport { UnprocessableEntityException, ValidationPipe } from '@nestjs/common';\r\nimport helmet from 'helmet';\r\nimport { Logger, VersioningType } from '@nestjs/common';\r\nimport appConfig from './config/app.config';\r\nimport cookieParser from 'cookie-parser';\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create(AppModule);\r\n\r\n  app.use(cookieParser());\r\n\r\n  app.setGlobalPrefix('api');\r\n\r\n  app.enableVersioning({\r\n    type: VersioningType.URI,\r\n  });\r\n\r\n  const whiteList: string[] = [\r\n    'http://localhost:3000',\r\n    'https://gajadicairbrooo.netlify.app',\r\n    'http://localhost:5173',\r\n  ];\r\n\r\n  app.enableCors({\r\n    origin: (\r\n      origin: string | undefined,\r\n      callback: (err: Error | null, allow?: boolean) => void,\r\n    ) => {\r\n      if (!origin || whiteList.indexOf(origin) !== -1) {\r\n        callback(null, true);\r\n      } else {\r\n        callback(new Error('Not allowed by CORS'));\r\n      }\r\n    },\r\n    credentials: true,\r\n  });\r\n\r\n  app.useGlobalPipes(\r\n    new ValidationPipe({\r\n      whitelist: true,\r\n      transform: true,\r\n      exceptionFactory: (errors) => {\r\n        const formattedErrors = errors.map((err) => ({\r\n          field: err.property,\r\n          messages: Object.values(err.constraints || {}),\r\n        }));\r\n\r\n        return new UnprocessableEntityException({\r\n          statusCode: 422,\r\n          message: 'Validation Error',\r\n          data: null,\r\n          errors: {\r\n            name: 'VALIDATION_ERROR',\r\n            message: null,\r\n            validationErrors: formattedErrors,\r\n          },\r\n        });\r\n      },\r\n    }),\r\n  );\r\n\r\n  app.use(cookieParser());\r\n  app.use(helmet());\r\n  await app.listen(appConfig().APP_PORT ?? 3000);\r\n  const logger = new Logger();\r\n  logger.log(`This app running at port ${appConfig().APP_PORT}`);\r\n}\r\nbootstrap();\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\utils\\date.utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\utils\\geography.utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Workplace\\Code\\Kuliah\\GajadiCair\\gajadicair-backend\\src\\utils\\response.utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]